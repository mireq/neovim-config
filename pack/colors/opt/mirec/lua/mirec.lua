local M = {}

local C_256 = {
	'#000000',
	'#800000',
	'#008000',
	'#808000',
	'#000080',
	'#800080',
	'#008080',
	'#c0c0c0',
	'#808080',
	'#ff0000',
	'#00ff00',
	'#ffff00',
	'#0000ff',
	'#ff00ff',
	'#00ffff',
	'#ffffff',
	'#000000',
	'#00005f',
	'#000087',
	'#0000af',
	'#0000d7',
	'#0000ff',
	'#005f00',
	'#005f5f',
	'#005f87',
	'#005faf',
	'#005fd7',
	'#005fff',
	'#008700',
	'#00875f',
	'#008787',
	'#0087af',
	'#0087d7',
	'#0087ff',
	'#00af00',
	'#00af5f',
	'#00af87',
	'#00afaf',
	'#00afd7',
	'#00afff',
	'#00d700',
	'#00d75f',
	'#00d787',
	'#00d7af',
	'#00d7d7',
	'#00d7ff',
	'#00ff00',
	'#00ff5f',
	'#00ff87',
	'#00ffaf',
	'#00ffd7',
	'#00ffff',
	'#5f0000',
	'#5f005f',
	'#5f0087',
	'#5f00af',
	'#5f00d7',
	'#5f00ff',
	'#5f5f00',
	'#5f5f5f',
	'#5f5f87',
	'#5f5faf',
	'#5f5fd7',
	'#5f5fff',
	'#5f8700',
	'#5f875f',
	'#5f8787',
	'#5f87af',
	'#5f87d7',
	'#5f87ff',
	'#5faf00',
	'#5faf5f',
	'#5faf87',
	'#5fafaf',
	'#5fafd7',
	'#5fafff',
	'#5fd700',
	'#5fd75f',
	'#5fd787',
	'#5fd7af',
	'#5fd7d7',
	'#5fd7ff',
	'#5fff00',
	'#5fff5f',
	'#5fff87',
	'#5fffaf',
	'#5fffd7',
	'#5fffff',
	'#870000',
	'#87005f',
	'#870087',
	'#8700af',
	'#8700d7',
	'#8700ff',
	'#875f00',
	'#875f5f',
	'#875f87',
	'#875faf',
	'#875fd7',
	'#875fff',
	'#878700',
	'#87875f',
	'#878787',
	'#8787af',
	'#8787d7',
	'#8787ff',
	'#87af00',
	'#87af5f',
	'#87af87',
	'#87afaf',
	'#87afd7',
	'#87afff',
	'#87d700',
	'#87d75f',
	'#87d787',
	'#87d7af',
	'#87d7d7',
	'#87d7ff',
	'#87ff00',
	'#87ff5f',
	'#87ff87',
	'#87ffaf',
	'#87ffd7',
	'#87ffff',
	'#af0000',
	'#af005f',
	'#af0087',
	'#af00af',
	'#af00d7',
	'#af00ff',
	'#af5f00',
	'#af5f5f',
	'#af5f87',
	'#af5faf',
	'#af5fd7',
	'#af5fff',
	'#af8700',
	'#af875f',
	'#af8787',
	'#af87af',
	'#af87d7',
	'#af87ff',
	'#afaf00',
	'#afaf5f',
	'#afaf87',
	'#afafaf',
	'#afafd7',
	'#afafff',
	'#afd700',
	'#afd75f',
	'#afd787',
	'#afd7af',
	'#afd7d7',
	'#afd7ff',
	'#afff00',
	'#afff5f',
	'#afff87',
	'#afffaf',
	'#afffd7',
	'#afffff',
	'#d70000',
	'#d7005f',
	'#d70087',
	'#d700af',
	'#d700d7',
	'#d700ff',
	'#d75f00',
	'#d75f5f',
	'#d75f87',
	'#d75faf',
	'#d75fd7',
	'#d75fff',
	'#d78700',
	'#d7875f',
	'#d78787',
	'#d787af',
	'#d787d7',
	'#d787ff',
	'#d7af00',
	'#d7af5f',
	'#d7af87',
	'#d7afaf',
	'#d7afd7',
	'#d7afff',
	'#d7d700',
	'#d7d75f',
	'#d7d787',
	'#d7d7af',
	'#d7d7d7',
	'#d7d7ff',
	'#d7ff00',
	'#d7ff5f',
	'#d7ff87',
	'#d7ffaf',
	'#d7ffd7',
	'#d7ffff',
	'#ff0000',
	'#ff005f',
	'#ff0087',
	'#ff00af',
	'#ff00d7',
	'#ff00ff',
	'#ff5f00',
	'#ff5f5f',
	'#ff5f87',
	'#ff5faf',
	'#ff5fd7',
	'#ff5fff',
	'#ff8700',
	'#ff875f',
	'#ff8787',
	'#ff87af',
	'#ff87d7',
	'#ff87ff',
	'#ffaf00',
	'#ffaf5f',
	'#ffaf87',
	'#ffafaf',
	'#ffafd7',
	'#ffafff',
	'#ffd700',
	'#ffd75f',
	'#ffd787',
	'#ffd7af',
	'#ffd7d7',
	'#ffd7ff',
	'#ffff00',
	'#ffff5f',
	'#ffff87',
	'#ffffaf',
	'#ffffd7',
	'#ffffff',
	'#080808',
	'#121212',
	'#1c1c1c',
	'#262626',
	'#303030',
	'#3a3a3a',
	'#444444',
	'#4e4e4e',
	'#585858',
	'#626262',
	'#6c6c6c',
	'#767676',
	'#808080',
	'#8a8a8a',
	'#949494',
	'#9e9e9e',
	'#a8a8a8',
	'#b2b2b2',
	'#bcbcbc',
	'#c6c6c6',
	'#d0d0d0',
	'#dadada',
	'#e4e4e4',
	'#eeeeee',
}

local colorscheme = {
	{"Boolean", {ctermfg=251, cterm={bold=true}}},
	{"Character", {ctermfg=181, cterm={bold=true}}},
	{"ColorColumn", {ctermbg=233}},
	{"Comment", {ctermfg=8}},
	{"Conditional", {ctermfg=229, cterm={bold=true}}},
	{"Conceal", {ctermfg=120}},
	{"Constant", {ctermfg=181, cterm={bold=true}}},
	{"Cursor", {ctermfg=16, ctermbg=145}},
	{"CursorColumn", {ctermbg=232}},
	{"CursorLine", {ctermbg=232, cterm={underline=true}}},
	{"Debug", {ctermfg=181, cterm={bold=true}}},
	{"Define", {ctermfg=157, cterm={bold=true}}},
	{"Delimiter", {ctermfg=193}},
	{"DiffAdd", {ctermbg=22}},
	{"DiffChange", {ctermbg=24}},
	{"DiffDelete", {ctermfg=234, ctermbg=88}},
	{"DiffText", {ctermfg=251, ctermbg=31, cterm={bold=true}}},
	{"Directory", {ctermfg=231, cterm={bold=true}}},
	{"Error", {ctermfg=231, ctermbg=9}},
	{"ErrorMsg", {ctermfg=16, ctermbg=6}},
	{"Exception", {ctermfg=123, cterm={underline=true}}},
	{"Float", {ctermfg=219}},
	{"FoldColumn", {ctermfg=181, ctermbg=235}},
	{"Folded", {ctermfg=181, ctermbg=16}},
	{"Function", {ctermfg=228}},
	{"Identifier", {ctermfg=153, cterm={bold=true}}},
	{"phpMethodsVar", {ctermfg=151}},
	{"Include", {ctermfg=156, cterm={bold=true}}},
	{"IncSearch", {ctermfg=16, ctermbg=131}},
	{"Keyword", {ctermfg=227, cterm={bold=true}}},
	{"Label", {ctermfg=229, cterm={bold=true, underline=true}}},
	{"LineNr", {ctermfg=244, ctermbg=234}},
	{"Macro", {ctermfg=157, cterm={bold=true}}},
	{"MatchParen", {ctermfg=16, ctermbg=192, cterm={bold=true}}},
	{"ModeMsg", {ctermfg=181, cterm={bold=true}}},
	{"MoreMsg", {ctermfg=231, cterm={bold=true}}},
	{"NonText", {ctermfg=104}},
	{"Normal", {ctermfg=252, ctermbg=16}},
	{"Number", {ctermfg=111}},
	{"Operator", {ctermfg=153, cterm={bold=true}}},
	{"Pmenu", {ctermfg=248, ctermbg=235}},
	{"PmenuSel", {ctermfg=16, ctermbg=156}},
	{"PmenuSbar", {ctermfg=248, ctermbg=237}},
	{"PmenuThumb", {ctermfg=248, ctermbg=156}},
	{"PreCondit", {ctermfg=157, cterm={bold=true}}},
	{"PreProc", {ctermfg=156}},
	{"Question", {ctermfg=231, cterm={bold=true}}},
	{"Repeat", {ctermfg=222, cterm={bold=true}}},
	{"Search", {ctermfg=227, ctermbg=16, cterm={bold=true, reverse=true}}},
	{"SignColumn", {ctermfg=244, ctermbg=233}},
	{"SpecialChar", {ctermfg=181, cterm={bold=true}}},
	{"SpecialComment", {ctermfg=181, cterm={bold=true}}},
	{"Special", {ctermfg=192}},
	{"SpecialKey", {ctermfg=8}},
	{"SpellBad", {ctermfg=174, ctermbg=233, undercurl=true, cterm={underline=true}}},
	{"Statement", {ctermfg=229, cterm={bold=true}}},
	{"doxygenBrief", {ctermfg=249, cterm={bold=true}}},
	{"doxygenSpecialOnelineDesc", {ctermfg=123}},
	{"StatusLine", {ctermbg=16, ctermfg=28, cterm={bold=true}}},
	{"StatusLineNC", {ctermfg=234, ctermbg=252}},
	{"StorageClass", {ctermfg=87, cterm={bold=true}}},
	{"String", {ctermfg=174}},
	{"Structure", {ctermfg=192, cterm={bold=true}}},
	{"Tag", {ctermfg=181, cterm={bold=true}}},
	{"Title", {ctermfg=231, cterm={bold=true}}},
	{"Todo", {ctermfg=231, ctermbg=16, cterm={bold=true}}},
	{"Typedef", {ctermfg=206, cterm={bold=true, underline=true}}},
	{"Type", {ctermfg=153}},
	{"Underlined", {ctermfg=81, cterm={underline=true}}},
	{"VertSplit", {ctermfg=236, ctermbg=16}},
	{"Visual", {ctermfg=210, ctermbg=236}},
	{"VisualNOS", {ctermfg=234, ctermbg=210, cterm={bold=true, underline=true}}},
	{"WarningMsg", {ctermfg=231, ctermbg=234, cterm={bold=true}}},
	{"WildMenu", {ctermfg=16, ctermbg=181}},
	{"Whitespace", {ctermfg=242}},

	{"OverLength", {ctermbg=237}},
	{"WarnLength", {ctermbg=235}},

	{"BufferSelected", {ctermfg=227, ctermbg=16, cterm={bold=true, reverse=true}}},
	{"BufferNormal", {ctermfg=252, ctermbg=16}},

	{"QtObject", {ctermfg=120}},

	{"outlTags", {ctermfg=51}},
	{"OL1", {ctermfg=231, ctermbg=232, cterm={bold=true, underline=true}}},
	{"OL2", {ctermfg=231, cterm={bold=true}}},
	{"OL3", {ctermfg=228, cterm={bold=true}}},
	{"OL4", {ctermfg=254}},
	{"OL5", {ctermfg=189}},
	{"OL6", {ctermfg=187}},
	{"OL7", {ctermfg=146}},
	{"OL8", {ctermfg=144}},
	{"OL9", {ctermfg=103}},

	{"BT1", {ctermfg=230}},
	{"BT2", {ctermfg=230}},
	{"BT3", {ctermfg=230}},
	{"PT1", {ctermfg=196}},
	{"PT2", {ctermfg=196}},
	{"PT3", {ctermfg=196}},
	{"TA1", {ctermfg=230}},
	{"TA2", {ctermfg=230}},
	{"TA3", {ctermfg=230}},
	{"UT1", {ctermfg=196}},
	{"UT2", {ctermfg=196}},
	{"UT3", {ctermfg=196}},
	{"UB1", {ctermfg=196}},
	{"UB2", {ctermfg=196}},
	{"UB3", {ctermfg=196}},

	{"RegionMaker", {ctermfg=235, ctermbg=253}},
	{"cCustomFunc", {ctermfg=158}},
	{"cCustomClass", {ctermfg=159}},

	{"cppFuncDef", {link="Special"}},
	{"diffFile", {link="Conceal"}},


	{"Attribute", {ctermfg=158}},
	{"CallClass", {ctermfg=120}},
	{"CallStaticClass", {ctermfg=231, cterm={bold=true}}},
	{"CallFunction", {ctermfg=153}},
	{"CallPrivateFunction", {ctermfg=204}},
	{"Self", {ctermfg=144, cterm={bold=true}}},


	{"todoOkSymbol", {ctermfg=34}},
	{"todoBadSymbol", {ctermfg=196}},
	{"todoPartSymbol", {ctermfg=191}},
	{"todoOk", {ctermfg=241}},
	{"todoBad", {ctermfg=227}},
	{"todoPart", {ctermfg=136}},

	{"mailQuoted1", {ctermfg=191}},
	{"mailQuoted2", {ctermfg=94}},
	{"mailQuoted3", {ctermfg=24}},
	{"mailQuoted4", {ctermfg=88}},

	{"IndentGuidesOdd", {ctermbg=234, ctermfg=8}},
	{"IndentGuidesEven", {ctermbg=235, ctermfg=8}},

	{"IndentBlanklineSpaceIndent1", {ctermfg=242, ctermbg=16}},
	{"IndentBlanklineSpaceIndent2", {ctermfg=242, ctermbg=232}},
	{"IndentBlanklineIndent1", {ctermfg=242, ctermbg=16}},
	{"IndentBlanklineIndent2", {ctermfg=242, ctermbg=232}},

	{"CmpItemMenu", {ctermfg=120, cterm={italic=true}}},

	{"CmpItemAbbrMatch", {cterm={bold=true}, ctermfg=231}},
	{"CmpItemAbbrMatchFuzzy", {cterm={bold=true}, ctermfg=231}},
	{"CmpItemMenu", {cterm={italic=true}}},
	{"CmpItemAbbrDeprecated", {ctermfg=244}},

	{"CmpItemKindField", {ctermfg=255, ctermbg=131}},
	{"CmpItemKindProperty", {ctermfg=255, ctermbg=131}},
	{"CmpItemKindEvent", {ctermfg=255, ctermbg=131}},

	{"CmpItemKindEnum", {ctermfg=255, ctermbg=28}},
	{"CmpItemKindKeyword", {ctermfg=255, ctermbg=28}},

	{"CmpItemKindConstant", {ctermfg=255, ctermbg=23}},
	{"CmpItemKindConstructor", {ctermfg=255, ctermbg=23}},
	{"CmpItemKindReference", {ctermfg=255, ctermbg=23}},

	{"CmpItemKindFunction", {ctermfg=255, ctermbg=90}},

	{"CmpItemKindStruct", {ctermfg=255, ctermbg=125}},
	{"CmpItemKindClass", {ctermfg=255, ctermbg=125}},
	{"CmpItemKindModule", {ctermfg=255, ctermbg=125}},
	{"CmpItemKindOperator", {ctermfg=255, ctermbg=125}},

	{"CmpItemKindVariable", {ctermfg=255, ctermbg=55}},
	{"CmpItemKindFile", {ctermfg=255, ctermbg=55}},
	{"CmpItemKindSnippet", {ctermfg=255, ctermbg=55}},

	{"CmpItemKindUnit", {ctermfg=255, ctermbg=58}},
	{"CmpItemKindFolder", {ctermfg=255, ctermbg=58}},
	{"CmpItemKindText", {ctermfg=255, ctermbg=58}},

	{"CmpItemKindMethod", {ctermfg=255, ctermbg=61}},
	{"CmpItemKindValue", {ctermfg=255, ctermbg=61}},
	{"CmpItemKindEnumMember", {ctermfg=255, ctermbg=61}},

	{"CmpItemKindInterface", {ctermfg=255, ctermbg=66}},
	{"CmpItemKindColor", {ctermfg=255, ctermbg=66}},
	{"CmpItemKindTypeParameter", {ctermfg=255, ctermbg=66}},

	{"TelescopeInvisible", {ctermfg=233, ctermbg=233}},
	{"TelescopeInvisible2", {ctermfg=235, ctermbg=235}},
	{"TelescopeNormal", {ctermfg=252, ctermbg=233}},
	{"TelescopePromptBorder", {ctermfg=31, ctermbg=31}},
	{"TelescopePromptTitle", {ctermfg=255, ctermbg=31}},
	{"TelescopePromptNormal", {ctermfg=255, ctermbg=31, cterm={bold=true}}},
	{"TelescopePromptCounter", {ctermfg=255, ctermbg=31}},
	{"TelescopePreviewTitle", {ctermfg=255, ctermbg=233}},
	{"TelescopeResultsNormal", {ctermbg=235}},
	{"TelescopePreviewNormal", {ctermbg=233}},
	{"TelescopeResultsTitle", {ctermfg=255, ctermbg=235}},

	{"TelescopeResultsBorder", {link="TelescopeInvisible2"}},
	{"TelescopePreviewBorder", {link="TelescopeInvisible"}},
};

M.setup = function(config)
	vim.cmd('hi clear')
	if vim.fn.exists('syntax_on') then
		vim.cmd('syntax reset')
	end
	vim.o.background = 'dark'
	--vim.o.termguicolors = true
	vim.g.colors_name = 'mirec'

	for _, highlight_definition in ipairs(colorscheme) do
		local name = highlight_definition[1];
		local colors = highlight_definition[2];
		if colors.ctermfg ~= nil then
			colors.fg = C_256[colors.ctermfg - 1]
		end
		if colors.ctermbg ~= nil then
			colors.bg = C_256[colors.ctermbg - 1]
		end
		if colors.cterm ~= nil then
			for key, val in pairs(colors.cterm) do
				if key == "bold" or key == "italic" then
					colors[key] = val
				end
			end
		end
		vim.api.nvim_set_hl(0, name, colors)
	end
end

return M
